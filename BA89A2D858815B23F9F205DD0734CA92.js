function PresetEditor(n){function i(n){return n&&n!==null&&n!==undefined?!1:!0}function r(n,t){for(;n&&n!==document;n=n.parentNode)if(n.matches(t))return n;return null}function t(n,t){var i=document.createElement(n);return i.className=t,i}function u(){var n={},t=document.querySelector(".PresetEditorTree > .Group"),s=function(){},r=function(n,t,r,u,f){var s=n.querySelector("div#price"),e=n.querySelector("div#priceTotal"),o=n.querySelector("div#priceBreak");s.textContent="$"+t;i(e)||(f>1?(e.classList.remove("Hide"),e.textContent="$"+t+" x "+f+" = $"+r):e.classList.add("Hide"));i(o)||(t!=u?(o.classList.remove("Hide"),o.textContent="$"+u):o.classList.add("Hide"))},u=function(t,i){var o=t.querySelectorAll(":scope > .GroupContainer > .Group"),f=t.querySelectorAll(":scope > .GroupContainer > .Product"),r,e;i*=t.getAttribute("quantity");for(let t=0;t<f.length;t++)r=f[t].getAttribute("name"),e=f[t].getAttribute("quantity"),n[r]=n.hasOwnProperty(r)?n[r]+e*i:e*i;for(let n=0;n<o.length;n++)u(o[n],i)},f=function(t){var o=t.querySelectorAll(":scope > .GroupContainer > .Group"),s=t.querySelectorAll(":scope > .GroupContainer > .Product"),i=0,e;for(let n=0;n<o.length;n++)i+=f(o[n]);for(let t=0;t<s.length;t++){var u=s[t],h=u.getAttribute("name"),c=u.getAttribute("quantity"),l=n[h];const{productPrice:f,productPriceOld:o}=Store.GetProductUnitPrice(h,l);u.setAttribute("price",f);e=f*c;i+=e;r(u,f,e,o,c)}return t.setAttribute("price",i),i*t.getAttribute("quantity")},e=function(){var i=document.querySelector(".ProductsView").querySelectorAll(".Product");for(let e=0;e<i.length;e++){var t=i[e],u=t.getAttribute("name"),f=n[u];const{productPrice:o,productPriceOld:s}=Store.GetProductUnitPrice(u,f);t.setAttribute("price",o);r(t,o,o,s,1)}},o=function(t){const i=Object.entries(n).map(([n,t])=>Store.GetProductUnitPrice(n,1).productPrice*t).reduce((n,t)=>n+t,0)-t;document.querySelector("#totalDiscount").textContent="$"+i;document.querySelector("#totalPrice").textContent="$"+t};u(t,1);e();o(f(t))}function s(){var l=null,o=null,t=null,s="",a=!1,h=!1,f=null,b=n=>i(n)||n.classList.contains("DragArea"),k=n=>i(n)||n.classList.contains("DropArea"),d=n=>i(n)||n.classList.contains("DropAreaRemoveItem"),y=function(i){b(i.target)&&(t=r(i.target,"item"),s=t.getAttribute("name"),a=t.classList.contains("Product")&&s!="Group",h=r(t,".ProductsView")!=null,n.classList.add("ItemInTheAir"),f=document.createElement("div"),f.className="ItemPlaceholder",f.style.width=t.offsetWidth+"px",f.style.height=t.offsetHeight+"px",t.parentElement.insertBefore(f,t),t.classList.add("Dragged"),v(i))},v=function(n){var u=0,f=0,s=!1,e;n.type==="touchmove"?(u=n.touches[0].clientX||0,f=n.touches[0].clientY||0,s=!0):(u=n.clientX||0,f=n.clientY||0);l=document.elementFromPoint(u,f);e=r(l,".Group");o!=e&&(o&&o.classList.remove("PointedGroup"),o=e,o&&o.classList.add("PointedGroup"));i(t)||(s&&n.preventDefault(),t.style.left=u+"px",t.style.top=f+40+"px")},g=function(n){if(!i(t))if(d(n))h||(t.parentNode.removeChild(t),t=null,u());else if(k(n)){let c=r(n,".Group"),f=c.querySelector(".GroupContainer"),o=!0;if(a){let n=f.querySelector(':scope > item[name="'+s+'"]');if(!i(n)){if(n!=t){let i=Number(t.getAttribute("quantity"))+Number(n.getAttribute("quantity"));n.setAttribute("quantity",i);n.querySelector("input#counter").value=i;h||(t.parentNode.removeChild(t),t=null)}o=!1}}o&&(h?a?f.insertBefore(e.CreateProductItem(f,s,1),f.firstChild):f.insertBefore(e.CreateGroupItem(f,s),f.firstChild):f.insertBefore(t,f.firstChild));u()}},p=function(r){n.classList.remove("ItemInTheAir");g(r.type==="touchend"?l:r.target);i(t)||(t.classList.remove("Dragged"),t.style.left=0,t.style.top=0,t=null);i(f)||(f.parentNode.removeChild(f),f=null)},w=!1,c;try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:()=>w=!0}))}catch(nt){}c=w?{passive:!1}:!1;document.addEventListener("touchstart",y,c);document.addEventListener("touchmove",v,c);document.addEventListener("touchend",p,c);document.addEventListener("mousedown",y,!1);document.addEventListener("mousemove",v,!1);document.addEventListener("mouseup",p,!1)}function h(n,t){var i=new Spinbox(t,"counter",t=>{n.setAttribute("quantity",t),u()});return i.container}function c(n,i,r){var o=n.appendChild(t("div","GroupHead DragArea DropArea")),f=o.appendChild(t("div","GroupTitle DropArea")),u=o.appendChild(t("input","GroupTitleEditor Hide")),e;return f.textContent=i,u.value=i,e=o.appendChild(t("div","GroupCounter DropArea")),e.id="counter",e.textContent=r,f.ondblclick=function(){u.classList.remove("Hide");u.focus();f.classList.add("Hide");e.classList.add("Hide")},u.onchange=function(){n.setAttribute("name",u.value);f.textContent=u.value;u.blur()},u.onblur=function(){f.classList.remove("Hide");e.classList.remove("Hide");u.classList.add("Hide")},o}function l(n){var i=n.appendChild(t("div","CheckoutPanel")),r=i.appendChild(t("div","PriceBlock")),s=r.appendChild(t("div","Title")),h=r.appendChild(t("div","Title")),u=i.appendChild(t("div","PriceBlock")),f=u.appendChild(t("div","Price")),e=u.appendChild(t("div","Price")),o=i.appendChild(t("div","BuyButton"));s.textContent="Discount:";h.textContent="Total:";f.textContent="$000";e.textContent="$000";f.id="totalDiscount";e.id="totalPrice";o.textContent="Buy";o.onclick=()=>alert("No")}var e=this,o,f;console.log(location.hash);o=`{
            "Demo: 10 FullbodyUsingPicoG2~1":{
                "Fullbody~10":{
                    "Head":{
                        "ACHA0Alt__A":1,
						"ACHA0PicoG2Socket__A": 1
                    },
                    "Hand~2":{
                        "ACHA0Alt__A":1,
                        "ACHA0Bracer__RA":1
                    },
                    "Leg~2":{
                        "ACHA0Alt__A":1,
                        "ACHA0Socket__RA":1
                    }
                },
                "TrackingArea10m2":10
            }
        
        }`;this.CreateItem=function(n,t,i,r){var u=n.appendChild(document.createElement("item"));return u.setAttribute("quantity",i),u.setAttribute("name",t),u.className=r,u};this.CreateProductItem=function(n,i,r){var u=this.CreateItem(n,i,r,"Product");const o="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAIAAACQd1PeAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAAMSURBVBhXY2BgYAAAAAQAAVzN/2kAAAAASUVORK5CYII=";var s=u.appendChild(t("div","ProductViewContainer")),c=s.appendChild(t("div","ProductBadge DragArea DropArea")),p=c.appendChild(t("img","ProductBadgeImage")),w=c.appendChild(t("div","ProductBadgeTitle"));p.src=o;w.textContent=Store.PRODUCTS[i].Name;var l=s.appendChild(t("div","ProductCard")),f=l.appendChild(t("div","ProductCardContent DragArea")),b=f.appendChild(t("img","ProductCardImage")),e=f.appendChild(t("div","ProductCardInfoBody")),a=e.appendChild(t("div","ProductCardPriceBreak")),v=e.appendChild(t("div","ProductCardPrice")),k=e.appendChild(t("div","ProductCardTitle")),y=f.appendChild(t("div","ProductCardPriceTotal")),d=l.appendChild(h(u,r));return b.src=o,a.textContent="$000",a.id="priceBreak",v.textContent="$000",v.id="price",k.textContent=Store.PRODUCTS[i].Name,y.textContent="$000",y.id="priceTotal",u};this.CreateGroupItem=function(n,i,r){var f=i.match(/^([^~]*)(~(\d+))?$/),e,o,u,s;if(f==null)throw new Error("Invalid group name:"+i);return e=f[1],r?(u=this.CreateItem(n,e,1,"Group RootGroup"),s=u.appendChild(t("div","GroupContainer DropArea")),s.style.height="100%",u):(o=f[3]!=undefined?parseInt(f[3],10):1,u=this.CreateItem(n,e,o,"Group DragArea"),u.appendChild(t("div","GroupSpacer")),c(u,e,o),u.appendChild(t("div","GroupContainer DragArea DropArea")),u)};this.ObjToDom=function(n,t,i){var u=Object.keys(t),r;for(let f=0;f<u.length;f++)if(r=t[u[f]],typeof r=="number")this.CreateProductItem(n.querySelector(".GroupContainer"),u[f],r);else if(typeof r=="object"){let t=this.CreateGroupItem(n.querySelector(".GroupContainer")||n,u[f],i);this.ObjToDom(t,r,!1)}};this.CreatePresetEditorTree=function(n,t){var i=n.appendChild(document.createElement("div"));i.className="PresetEditorTree";i.style.overflow="auto";this.ObjToDom(i,JSON.parse(t),!0)};this.CreateProductsList=function(n){var u=n.appendChild(t("div","ProductsView")),i,r;u.style.overflow="auto";i=u.appendChild(t("div","ProductsContainer"));i.appendChild(t("div","DropAreaRemoveItem"));r=Object.keys(Store.PRODUCTS);for(let n=0;n<r.length;n++)this.CreateProductItem(i,r[n],1)};n.style.overflow="auto";f=n.appendChild(t("div","EditorWorkspace"));this.CreateProductsList(f);this.CreatePresetEditorTree(f,o);l(n);u();s();this.Head=new RegExp('((".+")|(w+))s*(:s*d+)?s*');this.OnWindowResize=function(){};this.OnDOMContentLoaded=function(){this.OnWindowResize()}}
function Spinbox(n,t,i){var r=this;this.container=document.createElement("div");this.buttonDown=this.container.appendChild(document.createElement("div"));this.input=this.container.appendChild(document.createElement("input"));this.buttonUp=this.container.appendChild(document.createElement("div"));this.container.className="Spinbox";this.buttonDown.className="SpinboxButtonDown";this.input.className="SpinboxInput";this.buttonUp.className="SpinboxButtonUp";this.input.type="text";this.input.id=t;this.input.value=n;SetInputFilter(this.input,n=>/^\d+$/.test(n));this.input.onchange=function(){let n=Number(r.input.value);n==0&&(n=1,r.input.value=n);i&&i(n)};this.buttonUp.onclick=function(){r.input.value=parseInt(r.input.value,10)+1;r.input.onchange()};this.buttonDown.onclick=function(){r.input.value=Math.max(parseInt(r.input.value,10)-1,1);r.input.onchange()}}function SetInputFilter(n,t){["input","keydown","keyup","mousedown","mouseup","select","contextmenu","drop"].forEach(function(i){n.addEventListener(i,function(){t(this.value)?(this.oldValue=this.value,this.oldSelectionStart=this.selectionStart,this.oldSelectionEnd=this.selectionEnd):this.hasOwnProperty("oldValue")?(this.value=this.oldValue,this.setSelectionRange(this.oldSelectionStart,this.oldSelectionEnd)):this.value=""})})}

class Store {
    static PRODUCTS = {
        ACHA0Alt__A: {
            Name: "Alt",
            Prices: [{ From: 1, Price: 650 }, { From: 4, Price: 598 }, { From: 16, Price: 550 }, { From: 64, Price: 506 }, { From: 256, Price: 466 }, { From: 1024, Price: 428 }]
        },
        ACHA0Socket__A: {
            Name: "USB PC Socket",
            Prices: [{ From: 1, Price: 50 }, { From: 4, Price: 46 }, { From: 16, Price: 42 }, { From: 64, Price: 39 }, { From: 256, Price: 36 }, { From: 1024, Price: 33 }]
        },
        ACHA0RadioSocket__A: {
            Name: "HMD Radio Socket",
            Prices: [{ From: 1, Price: 75 }, { From: 4, Price: 69 }, { From: 16, Price: 63 }, { From: 64, Price: 58 }, { From: 256, Price: 54 }, { From: 1024, Price: 49 }]
        },
        ACHA0Socket__RA: {
            Name: "Tag",
            Prices: [{ From: 1, Price: 75 }, { From: 4, Price: 69 }, { From: 16, Price: 63 }, { From: 64, Price: 58 }, { From: 256, Price: 54 }, { From: 1024, Price: 49 }]
        },
        ACHA0Bracer__RA: {
            Name: "Bracer",
            Prices: [{ From: 1, Price: 90 }, { From: 4, Price: 83 }, { From: 16, Price: 76 }, { From: 64, Price: 70 }, { From: 256, Price: 64 }, { From: 1024, Price: 59 }]
        },
        ACHA0PicoG2Socket__A: {
            Name: "Pico G2 Socket",
            Prices: [{ From: 1, Price: 75 }, { From: 4, Price: 69 }, { From: 16, Price: 63 }, { From: 64, Price: 58 }, { From: 256, Price: 54 }, { From: 1024, Price: 49 }]
        },
        TrackingArea10m2: {
            Name: "Tracking area 10m2",
            Prices: [{ From: 1, Price: 250 }]
        },

        Group: {
            Name: "Group",
            Prices: [{ From: 1, Price: 0 }]
        }
    };

    constructor() {
        
    }

    static GetProductUnitPrice(productName, productQuantityGlobal) {
        if (isNaN(productQuantityGlobal) || Number(productQuantityGlobal) <= 0) {
            productQuantityGlobal = 1;
        }

        var productInfo = Store.PRODUCTS[productName];
        var productPrice = 0;
        var productPriceOld = 0;

        for (let i = 0; i < productInfo.Prices.length; i++) {
            let priceInfo = productInfo.Prices[i];

            if (priceInfo.From <= productQuantityGlobal) {
                if (productPriceOld == 0 || productPrice == 0) {
                    productPriceOld = Math.max(productPriceOld, productPrice);
                } else {
                    productPriceOld = Math.min(productPriceOld, productPrice);
                }

                productPrice = priceInfo.Price;
            }
        }

        if (productPriceOld == 0) {
            productPriceOld = productPrice;
        }

        return { productPrice, productPriceOld };
    }

}
function CreateStoreProductCard(n,t){var u=CreateElement("div","ProductCard"),i=u.appendChild(CreateElement("div","ProductCardContent DragArea")),s=i.appendChild(CreateElement("img","ProductCardImage")),r=i.appendChild(CreateElement("div","ProductCardInfoBody")),f=r.appendChild(CreateElement("div","ProductCardPriceBreak")),e=r.appendChild(CreateElement("div","ProductCardPrice")),h=r.appendChild(CreateElement("div","ProductCardTitle")),o=i.appendChild(CreateElement("div","ProductCardPriceTotal")),c=u.appendChild(CreateItemCounter(item,t));return s.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAIAAACQd1PeAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAAMSURBVBhXY2BgYAAAAAQAAVzN/2kAAAAASUVORK5CYII=",f.textContent="$000",f.id="priceBreak",e.textContent="$000",e.id="price",h.textContent=Store.PRODUCTS[n].Name,o.textContent="$000",o.id="priceTotal",item}
function SdkConfigurator(n){var t={},r=[],s=function(n){r=r.filter(t=>t!==n)},u=function(n){var i=n.trimStart(n),f=n.length-i.length,r=[...n.matchAll(/`(\S+)/g)].map(n=>n[1]),t,u;return r.unshift("Space"+f),t=i.replace(/`/g,""),u=t.replace(/ /g,""),[t,u,r]},f=function(i,...r){var f=r.flat(),[v,c,y]=u(i),h,l,a;for(s(c),h=-1,l=0;l<f.length;l++)if(t[c]==f[l]){h=l;break}h==-1&&(h=0,t[c]=f[h]);a=n.appendChild(document.createElement("select"));n.appendChild(e(v,a)).classList=y.join(" ");a.onchange=function(){console.log(this.options[this.selectedIndex].value);t[c]=f[this.selectedIndex];o()};for(let n=0;n<f.length;n++)a.appendChild(new Option(f[n],n,!1,h==n));return t[c]},e=function(n,t){var i=document.createElement("label");return i.innerText=n,t&&i.appendChild(t),i},i=function(i,r=true){var[c,f,l]=u(i),h;return s(f),t[f]==undefined&&(t[f]=r),h=document.createElement("input"),n.appendChild(e(c,h)).classList=l.join(" "),h.type="checkbox",h.checked=t[f],h.onchange=function(){t[f]=h.checked;o()},t[f]},c=function(t){var[i,,r]=u(t);n.appendChild(e(i,null)).classList=r.join(" ")},l=function(t){var i=n.appendChild(document.createElement("div"));i.classList="panel warning";i.appendChild(document.createElement("div")).innerText=t},o=function(){r=Object.keys(t);updateNeeded=!0;n.textContent="";a();for(let n=0;n<r.length;n++)delete t[r[n]];console.log(r);location.hash=JSON.stringify(t)},a=function(){var n=["default"],t=f("Platform","Native","Unity3D","Unreal Engine 4"),r;t=="Native"&&(r=f("Language","C++","C#"),r=="C#"&&n.unshift("Accord.Net"),r=="C++"&&n.unshift("Eigen"));i("Device Network `Library")&&(t=="Unity3D"&&i(" Device Network `Unity Component"),i("Tracking `Library"));i("Offline Tracking `Library");t=="Unity3D"&&(n.unshift("Accord.Net"),n.unshift("UnityEngine.Math"));f("Math Types",n);c("Operating Systems");i(" Win32")|i(" Win64")|i(" Android")||l("No operation systems selected")},h;try{h=decodeURIComponent(location.hash.replace(/^[#]/,""));t=JSON.parse(h)}catch(v){t={}}o()}
var Behaviour={GetCode:function(n,...t){return"new "+n+"(parent,"+t.map(function(n){return JSON.stringify(n)})+");"},Initialize:function(n,...t){let u=Behaviour.GetCode(n,...t),r=document.currentScript.parentElement;r.removeChild(document.currentScript);let i=new window[n](r,...t);i.hasOwnProperty("OnWindowResize")&&window.addEventListener("resize",function(){i.OnWindowResize()});i.hasOwnProperty("OnDOMContentLoaded")&&document.addEventListener("DOMContentLoaded",function(){i.OnDOMContentLoaded()});i.hasOwnProperty("OnResourcesLoaded")&&document.addEventListener("readystatechange",function(){document.readyState=="complete"&&i.OnResourcesLoaded()})},Print:function(n,...t){t.map(function(n){console.log(n)})},PrintParent:function(n){console.log(n)}}
function Downloadable(n,t,i){n.className="Downloadable";var r=[],u=function(t,i){if(typeof t=="object"){var e=n.appendChild(document.createElement("select"));e.className="Select";e.onchange=function(){r[i]=e.value;f()};options=Object.keys(t);for(let n=0;n<options.length;n++)e.appendChild(new Option(options[n],options[n],!1,r[i]==options[n]));return r[i]=e.value,u(t[e.value],i+1)}return t},f=function(){var f;n.textContent="";f=n.appendChild(document.createElement("div"));f.innerText=t;f.className="Title";var s=u(i,0),e=s.split("|"),o=e[0],h=e[1],c=o.split("/").pop(),r=n.appendChild(document.createElement("a"));r.className="Button";r.innerText="Download";r.href=o;r.title=c+" "+h;r.download=""};f()}
function Grid(n,t,i){this.element=n;this.elementWidthPx=t;this.numColumnsVariants=i;this.numColumnsVariants.sort(function(n,t){return n-t});this.previousContainerWidth=-1;this.previousClass="";this.previousNumColumns=0;this.OnWindowResize=function(){var n=this.element.offsetWidth,r,u,f,t;if(this.previousContainerWidth!=n){this.previousContainerWidth=n;r=0;u=Math.abs(n/i[0]-this.elementWidthPx);for(let t=1;t<i.length;t++)f=Math.abs(n/i[t]-this.elementWidthPx),f<u&&(u=f,r=t);t=i[r];this.previousNumColumns!=t&&(this.element.classList.remove("columns"+this.previousNumColumns),this.element.classList.add("columns"+t),this.previousNumColumns=t)}};this.OnDOMContentLoaded=function(){this.OnWindowResize()}}
function RoiImage(n,t,i){this.element=n;this.aspect=t;this.roi=i;this.previousContainerWidth=-1;this.image=this.element.getElementsByTagName("img")[0];this.OnWindowResize=function(){var n=this.element.offsetWidth,u,f;if(this.previousContainerWidth!=n){this.previousContainerWidth=n;var s=i[0]/100,a=i[1]/100,h=i[2]/100,v=i[3]/100,e=a-s,o=v-h,r=this.element.offsetHeight,c=n*o*t,l=n/e*t;this.element.style.minHeight=c+"px";this.element.style.maxHeight=l+"px";r=Math.max(r,c);r=Math.min(r,l);u=r/n;u<t?(this.image.style.width="100%",this.image.style.height="auto",f=(1-(u/t-o)/(1-o))*h*100,this.image.style.transform="translate(0, -"+f+"%)"):(this.image.style.width="auto",this.image.style.height="100%",f=(1-(t/u-e)/(1-e))*s*100,this.image.style.transform="translate(-"+f+"%, 0)")}};this.OnDOMContentLoaded=function(){this.OnWindowResize()}}
function ToggleButton(n){this.element=n;this.button=document.createElement("div");this.button.className="button toggle";this.Toggle=function(){this.button.classList.contains("checked")?(this.element.classList.remove("checked"),this.button.classList.remove("checked")):(this.element.classList.add("checked"),this.button.classList.add("checked"))};this.button.onclick=this.Toggle;this.element.appendChild(this.button)}
function getUniqueYouTubeIFrameID(){return youTubeIFrameID++,"youTubeIFrameID"+youTubeIFrameID}function callWhenYouTubeIFrameApiReady(n){youTubeIFrameApiIsReady?n():youTubeIFrameApiWaitList.push(n)}function onYouTubeIframeAPIReady(){youTubeIFrameApiWaitList.forEach(n=>n())}function VideoPlayer(n,t,i,r,u,f,e,o){this.element=n;this.code=t;this.aspect=i;this.showControls=r;this.autoPlay=u;this.loop=f;this.sound=e;this.mips=o;this.previousContainerWidth=-1;var s=function(){n.style.height=n.offsetWidth/i+"px"};window.addEventListener("resize",s);this.onYoutubePlayerReady=function(){};this.onYoutubePlayerStateChange=function(n){if(n.data==YT.PlayerState.ENDED){this.loop&&(this.player.seekTo(0),this.player.playVideo());return}};this.CreateYoutubeIFrame=function(){var n=this;callWhenYouTubeIFrameApiReady(function(){var t=document.createElement("div"),i;t.className="VideoPlayerInner";n.showControls||(t.style.top="-100%",t.style.height="300%",t.style.pointerEvents="none");t.id=getUniqueYouTubeIFrameID();n.element.appendChild(t);i=n.showControls?1:0;n.player=new YT.Player(t.id,{height:"100%",width:"100%",videoId:n.code,host:"http://www.youtube-nocookie.com",playerVars:{rel:0,autoplay:n.autoPlay?1:0,controls:n.showControls?1:0,mute:n.autoPlay?1:n.sound?0:1},events:{onReady:function(t){console.log("onReady "+n.code);n.onYoutubePlayerReady(t)},onStateChange:function(t){n.onYoutubePlayerStateChange(t)}}})})};this.CreateVideoTag=function(){var t=document.createElement("video"),e;t.className="VideoPlayerInner";t.controls=this.showControls;t.autoplay=this.autoPlay;t.muted=this.autoPlay||!this.sound;t.loop=this.loop;this.element.appendChild(t);var u=n.offsetWidth*window.devicePixelRatio,f=function(t){var r,u;for(console.log("SelectClosestMip "+n.offsetWidth+" x "+window.devicePixelRatio+" = "+t),r=0;r<o.length;r++)if(u=o[r].Key*i,u>.95*t)return o[r];return o[o.length-1]},r=f(n.offsetWidth*window.devicePixelRatio);t.src=r.Value;e=function(){var i=n.offsetWidth*window.devicePixelRatio,e,o;u!=i&&(u=i,e=f(i),e.Key!=r.Key&&(r=e,o=t.currentTime,t.src=r.Value,console.log("element.offsetWidth="+i+" => "+t.src),t.currentTime=o))};window.addEventListener("resize",e)};this.CreateYouTubeIFrameApiScript=function(){var n,f,t,i,r;const u="YouTubeIFrameApiScript";n=document.getElementById(u);n===null&&(n=document.createElement("script"),n.id=u,n.src="https://www.youtube.com/iframe_api",window.YouTubeIFrameApiStatus="loading",window.YouTubeIFrameApiStatusTimeout=setTimeout(()=>{n.onerror&&n.onerror()},1e3),f=document.getElementsByTagName("head")[0],f.appendChild(n));t=this;window.YouTubeIFrameApiStatus==="loading"?(i=n.onload,n.onload=function(){n.onload=null;n.onerror=null;window.YouTubeIFrameApiStatus==="loading"&&(window.YouTubeIFrameApiStatus="ready");n.onerror!==null&&(n.onerror=null);i&&i();t.CreateYoutubeIFrame()},r=n.onerror,n.onerror=function(){n.onload=null;n.onerror=null;window.YouTubeIFrameApiStatus==="loading"&&(window.YouTubeIFrameApiStatus="failed");r&&r();t.CreateVideoTag()}):(window.YouTubeIFrameApiStatus==="ready"&&t.CreateYoutubeIFrame(),window.YouTubeIFrameApiStatus==="failed"&&t.CreateVideoTag())};console.log(n.offsetWidth);this.OnDOMContentLoaded=function(){s();!r||u?this.CreateVideoTag():this.CreateYouTubeIFrameApiScript()}}var youTubeIFrameApiIsReady=!1,youTubeIFrameApiWaitList=[],youTubeIFrameID=0
function TemplateLeftSideMenu(n,t,i=48){this.element=n;this.contentWidth=t;this.anchorLineWidth=i;this.buttonChecked=!1;this.OnWindowResize=function(){this.Align()};this.Align=function(){var t=this.element.parentElement.offsetWidth,n=this.leftSideMenu.offsetWidth,r=t-n>this.contentWidth+this.anchorLineWidth;if(r?(this.leftSideMenu.style.left=0,this.button.style.visibility="hidden"):(this.button.style.visibility="visible",this.leftSideMenu.style.left=this.buttonChecked?0:-n+"px"),r){let r=t-n-this.contentWidth-this.anchorLineWidth;this.content.style.paddingLeft=i+"px";this.element.style.marginLeft=n+"px";this.element.style.marginRight=Math.min(.5*r,n)+"px"}else this.element.style.marginLeft=0,this.element.style.marginRight=0,t<this.contentWidth+this.anchorLineWidth?(this.content.style.paddingLeft=0,this.content.classList.add("anchorsInside"),this.content.classList.remove("anchorsOutside")):(this.content.style.paddingLeft=i+"px",this.content.classList.add("anchorsOutside"),this.content.classList.remove("anchorsInside"))};this.HamburgerButtonToggle=function(){console.log(this);this.buttonChecked=!this.buttonChecked;this.button.classList.toggle("Checked",this.buttonChecked);this.Align()};this.OnDOMContentLoaded=function(){this.leftSideMenu=this.element.querySelector(".LeftSideMenu");this.button=document.createElement("div");this.button.className="HamburgerButton";var n=this;this.button.onclick=function(){n.HamburgerButtonToggle()};this.leftSideMenu.appendChild(this.button);this.content=this.element.querySelector(".Content");this.content.style.maxWidth=this.contentWidth+"px";this.content.classList.add("anchorsOutside");this.Align()};this.OnResourcesLoaded=function(){this.Align()}}

