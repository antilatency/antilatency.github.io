<!DOCTYPE html><html lang="en"><head><link rel="stylesheet" href="https://antilatency.github.io/style.css"><script src="https://antilatency.github.io/script.js"></script><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=yes"><title>Prepare SD card image for Raspberry Pi</title></head><body class="TemplateRegularMaterial"><script>Behaviour.Initialize("TemplateLeftSideMenu",800,64)</script><nav class="menu LeftSideMenu" id="LeftSideMenu"><a class="text noselect" href="https://antilatency.github.io/Root/Index_zh.html" title="" style="font-family: 'antilatency' !important; font-size: 40px; color: black;"><span style="color: #ACC435">a</span><span>l</span></a><a class="text" href="https://antilatency.github.io/Root/Index_zh.html" title="">Antilatency</a><a class="text" href="https://antilatency.github.io/Store/PresetEditor_zh.html" title="Welcome to Antilatency store!">Store</a><a class="text" href="https://antilatency.github.io/Sdk/Configurator_zh.html" title="На этой странице вы сможите &quot;Приготовить&quot; Sdk, выбрав платформу и добавив ингредиенты на ваш вкус">Sdk</a><a class="text" href="https://antilatency.github.io/Terms/Antilatency_Device_Network_zh.html" title="Antilatency Device Network - eng.">Antilatency Device Network</a><a class="text" href="https://antilatency.github.io/Hardware/Alt_zh.html" title="На этой странице странице пока побудут некоторые примеры использования движка.">Alt</a><a class="text" href="https://antilatency.github.io/Internal/Debug_zh.html" title="На этой странице странице некоторые примеры использования движка.">Debug</a><a class="text" href="https://antilatency.github.io/Csml/CsmlPredefined/Diagnostics_zh.html" title="This page provide diagnostics information about website. This page is auto generated.">Diagnostics</a></nav><div id="Content" class="Content"><div class="header"><h1 class="title">Prepare SD card image for Raspberry Pi</h1><div class="text"></div></div><div class="section"><h2 class="title" id="Raspbian">Raspbian<a class="link" href="#Raspbian" title="Heading anchor"></a></h2><div class="text"><a class="text" href="https://www.raspbian.org/" title="https://www.raspbian.org/">Raspbian</a> is the Raspberry Pi Foundation’s official supported operation system based on Debian GNU/Linux.</div><div class="text">Images:</div><ul class="List Unordered"><li><div class="text"><a class="text" href="https://downloads.raspberrypi.org/raspbian_lite_latest" title="https://downloads.raspberrypi.org/raspbian_lite_latest">Raspbian Lite</a> - minimal image with command line interface.</div></li><li><div class="text"><a class="text" href="https://downloads.raspberrypi.org/raspbian_latest" title="https://downloads.raspberrypi.org/raspbian_latest">Raspbian Destop </a> - Raspbian Lite + graphical user interface: <a class="text" href="https://www.raspberrypi.org/blog/introducing-pixel/" title="https://www.raspberrypi.org/blog/introducing-pixel/">PIXEL desktop environment</a></div></li></ul><div class="text">Download preferred type of image and <a class="text" href="https://www.raspberrypi.org/documentation/installation/installing-images/README.md" title="https://www.raspberrypi.org/documentation/installation/installing-images/README.md">write it to microSD card</a> (you can install or remove GUI apps later).</div></div><div class="section"><h2 class="title" id="Wireless_setup">Wireless setup<a class="link" href="#Wireless_setup" title="Heading anchor"></a></h2><div class="text">You need to write WiFi network name / password to the Raspberry Pi SD card and enable SSH server before you can get remote access.</div><div class="text">Insert microSD card to your PC card reader then create two files <code>wpa_supplicant.conf</code> and <code>ssh</code> in the <code>boot</code> folder on the SD card.</div><div class="section"><h2 class="title" id="wpa_supplicant.conf">wpa_supplicant.conf<a class="link" href="#wpa_supplicant.conf" title="Heading anchor"></a></h2><div class="cplusplus code"><pre>
echo -e &#39;ctrl_interface=DIR=/var/run/wpa_supplicant GROUP=netdev
update_config=1
country=GB

network={
    ssid=<span class="string">&quot;Antilatency_5G&quot;</span>
    psk = <span class="string">&quot;standardpassword&quot;</span>
}

network={
    ssid=<span class="string">&quot;Antilatency&quot;</span>
    psk=<span class="string">&quot;standardpassword&quot;</span>
}&#39; | sudo tee /etc/wpa_suplicant.conf
</pre></div><div class="text">You can edit this settings later, see <a class="text" href="https://www.raspberrypi.org/documentation/configuration/wireless/wireless-cli.md" title="https://www.raspberrypi.org/documentation/configuration/wireless/wireless-cli.md">documentation</a>.</div></div><div class="section"><h2 class="title" id="ssh">ssh<a class="link" href="#ssh" title="Heading anchor"></a></h2><div class="text">Just empty file with <code>ssh</code> file name without extension.</div></div></div><div class="section"><h2 class="title" id="Update_installed_software">Update installed software<a class="link" href="#Update_installed_software" title="Heading anchor"></a></h2><div class="powershell code"><pre>
sudo apt update &amp;&amp; sudo apt upgrade
</pre></div></div><div class="section"><h2 class="title" id="Add_support_for_AntilatencyRPiSocket_power_button">Add support for AntilatencyRPiSocket power button<a class="link" href="#Add_support_for_AntilatencyRPiSocket_power_button" title="Heading anchor"></a></h2><div class="section"><h2 class="title" id="Enable_software_shutdown_via_GPIO">Enable software shutdown via GPIO<a class="link" href="#Enable_software_shutdown_via_GPIO" title="Heading anchor"></a></h2><div class="text">See more <a class="text" href="https://www.stderr.nl/Blog/Hardware/RaspberryPi/PowerButton.html" title="https://www.stderr.nl/Blog/Hardware/RaspberryPi/PowerButton.html">PowerButton</a></div><div class="powershell code"><pre>
echo <span class="string">&#39;dtoverlay=gpio-shutdown,gpio_pin=2&#39;</span> | sudo tee <span class="powershellOperator">-</span>a <span class="powershellOperator">/</span>boot<span class="powershellOperator">/</span>config.txt
</pre></div></div><div class="section"><h2 class="title" id="Install_WiringPi">Install WiringPi<a class="link" href="#Install_WiringPi" title="Heading anchor"></a></h2><div class="text"><a class="text" href="https://pinout.xyz/pinout/wiringpi" title="“WiringPi is an attempt to bring Arduino-wiring-like simplicity to the Raspberry Pi. The goal is to have a single common platform and set of functions for accessing the Raspberry Pi GPIO across multiple languages.”">WiringPi</a></div><div class="text"><code>sudo apt update &amp;&amp; sudo apt install wiringpi</code></div></div><div class="section"><h2 class="title" id="Set_RPI_OS_OK_GPIO_pin_to_HIGH_state">Set RPI_OS_OK GPIO pin to HIGH state<a class="link" href="#Set_RPI_OS_OK_GPIO_pin_to_HIGH_state" title="Heading anchor"></a></h2><div class="powershell code"><pre>
sudo nano <span class="powershellOperator">/</span>etc<span class="powershellOperator">/</span>rc.local
</pre></div><div class="text">Add lines:</div><div class="cplusplus code"><pre>
/usr/bin/gpio mode 2 output
/usr/bin/gpio write 2 1
</pre></div><div class="text">before <code>exit 0</code> line. Then press <code>Ctrl+o</code> then press Enter for saving result. Press <code>Ctrl+x</code> for exit.</div></div><div class="section"><h2 class="title" id="Setup_RPI_OFF_OK_GPIO_pin">Setup RPI_OFF_OK GPIO pin<a class="link" href="#Setup_RPI_OFF_OK_GPIO_pin" title="Heading anchor"></a></h2><div class="powershell code"><pre>
echo <span class="powershellOperator">-</span>e &#39;<span class="comment">#!/bin/sh</span>
gpio mode 3 output
gpio write 2 1
sleep 1
<span class="keyword">exit</span> 0&#39; | sudo tee <span class="powershellOperator">/</span>lib<span class="powershellOperator">/</span>systemd<span class="powershellOperator">/</span>system<span class="powershellOperator">-</span>shutdown<span class="powershellOperator">/</span>rpi_off_ok.sh <span class="powershellOperator">&gt;</span> <span class="powershellOperator">/</span>dev<span class="powershellOperator">/</span>null
</pre></div></div></div><div class="section"><h2 class="title" id="Prepare_antilatency_software_installation_directory">Prepare antilatency software installation directory<a class="link" href="#Prepare_antilatency_software_installation_directory" title="Heading anchor"></a></h2><div class="text">Create package directories and change owner</div><div class="powershell code"><pre>
sudo mkdir <span class="powershellOperator">-</span>p <span class="powershellOperator">/</span>opt<span class="powershellOperator">/</span>antilatency<span class="powershellOperator">/</span>bin <span class="powershellOperator">/</span>opt<span class="powershellOperator">/</span>antilatency<span class="powershellOperator">/</span>lib <span class="powershellOperator">/</span>opt<span class="powershellOperator">/</span>antilatency<span class="powershellOperator">/</span>etc &amp;&amp; sudo chown <span class="powershellOperator">-</span>R pi:pi <span class="powershellOperator">/</span>opt<span class="powershellOperator">/</span>antilatency
</pre></div><div class="text">Add rule for Antilatency USB devices:</div><div class="powershell code"><pre>
echo <span class="string">&#39;SUBSYSTEM==&quot;usb&quot;, ATTRS{idVendor}==&quot;3237&quot;, MODE=&quot;0666&quot;, GROUP=&quot;pi&quot;&#39;</span> | sudo tee <span class="powershellOperator">/</span>etc<span class="powershellOperator">/</span>udev<span class="powershellOperator">/</span>rules.d<span class="powershellOperator">/</span>66<span class="powershellOperator">-</span>antilatency.rules
</pre></div></div></div><nav class="language-menu"><a class="text" href="https://antilatency.github.io/Tutorials/PrepareRaspberryPiSdCard_en.html" title="">English</a><a class="text" href="https://antilatency.github.io/Tutorials/PrepareRaspberryPiSdCard_ru.html" title="">Русский</a><a class="text" href="https://antilatency.github.io/Tutorials/PrepareRaspberryPiSdCard_zh.html" title="">中文</a></nav></body></html>